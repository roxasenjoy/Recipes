<!DOCTYPE html>
<html>
    <head>
        <title>Ma page web</title>
        <link rel="stylesheet" href="index.css">
        <script src="index.js"></script>
    </head>

    <style>
    
    </style>

    <body>

        <div class="articles" data-view="list">

            <header>
              <button class="toggle" data-flip>
                <svg data-view="card" viewBox="0 0 448 512" width="100" title="bars">
                  <path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z" />
                </svg>
                <svg data-view="list" viewBox="0 0 448 512" width="1em" title="border-all">
                  <path d="M416 32H32A32 32 0 0 0 0 64v384a32 32 0 0 0 32 32h384a32 32 0 0 0 32-32V64a32 32 0 0 0-32-32zm-32 64v128H256V96zm-192 0v128H64V96zM64 416V288h128v128zm192 0V288h128v128z" />
                </svg>
              </button>
            </header>
          
            <% recettes.forEach((row) => { %>
                <article>

                    <div class="image" data-flip>
                        <img src=<%= row.image %> alt=''>
                      </div>
                    
                    <div class="content" data-flip>
                        <h1><%= row.name %></h1>
                    </div>
                </article>
            <% }); %>

           

            <article>
              <div class="image" data-flip>
                <img src='https://images.unsplash.com/photo-1587590576938-413aa6a5c2aa?crop=faces&cs=tinysrgb&fit=crop&fm=jpg&ixid=MXwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHw&ixlib=rb-1.2.1&q=80&w=400&h=300' alt=''>
              </div>
              <div class="content" data-flip>
                    <h1>Productivity Tips</h1>
                    <div class="tags">
                        <svg viewBox="0 0 640 512" width="1em" title="tags">
                            <path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z" />
                        </svg>
                        Learning, Notes
                    </div>
                    <time>
                    <svg viewBox="0 0 448 512" width="1em" title="calendar">
                        <path d="M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z" />
                    </svg>
                    </time>
                </div>
            </article>
          </div>
    </body>
</html>


<script>
    console.clear();


const elContainer = document.querySelector(".articles");
const elToggle = elContainer.querySelector(".toggle");
const losFlippers = elContainer.querySelectorAll("[data-flip]");

elToggle.addEventListener("click", () => {
    flip(() => {
        elContainer.dataset.view =
        elContainer.dataset.view === "card" ? "list" : "card";
    }, losFlippers);
});

function getRect(el) {
return el.getBoundingClientRect();
}

function flip(doSomething, firstEls, getLastEls = () => firstEls) {
const firstElsRects = Array.from(firstEls).map((el) => [el, getRect(el)]); // tuple [Element, ClientRect { ... } ]

requestAnimationFrame(() => {
    doSomething();
    const lastElsRects = Array.from(getLastEls()).map((el) => [
    el,
    getRect(el)
    ]);

    firstElsRects.forEach(([firstEl, firstRect], i) => {
    let [lastEl, lastRect] = lastElsRects[i];
    const dx = lastRect.x - firstRect.x;
    const dy = lastRect.y - firstRect.y;
    const dw = lastRect.width / firstRect.width;
    const dh = lastRect.height / firstRect.height;
    lastEl.dataset.flipping = true;
    lastEl.style.setProperty("--dx", dx);
    lastEl.style.setProperty("--dy", dy);
    lastEl.style.setProperty("--dw", dw);
    lastEl.style.setProperty("--dh", dh);
    requestAnimationFrame(() => delete lastEl.dataset.flipping);
    });
});
}
</script>
